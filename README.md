# TaskNotissimusParse

Решенное тестовое от компании ООО НОТИССИМУС

<details>
  <summary>Текст задания</summary>
  
  https://drive.google.com/file/d/1JoZ3tKjPj6h88kUlD8JALyT1BxJ30I8k/view

</details>

# Установка и настройка

## Предварительные требования

1. Удостоверьтесь, что на компьютере установлен пакет SDK для .NET 7.0. Скачать его можно с официального сайта https://dotnet.microsoft.com/en-us/download/dotnet/7.0

## Установка и запуск

<details>
  <summary>Используя терминал</summary>

1. Клонируйте приложение с помощью команды git:
```
git clone https://github.com/pfhil/TaskNotissimusParse.git
```
2. Перейдите в каталог проекта с помощью команды:
```
cd TaskNotissimusParse
```
3. Чтобы собрать и запустить приложение выполните команду:
```
dotnet run
```

</details>

<details>
  <summary>Используя Visual Studio 2022</summary>
  
1. Скачайте архив проекта (Кнопка Code->Download ZIP)
2. Разархивируйте его
3. Откройте каталог TaskNotissimusParse-master и в нем при помощи Visual Studio 2022 откройте TaskNotissimusParse.sln

Далее используя Visual Studio 2022

4. Запустите проект (кнопка Start в меню сверху или F5 на клавиатуре)

</details>

## Примечания по выполненному заданию

CSV Файл с уже собранными данными находится в репозитории и имеет название data1.csv

После начала парсинга данных, программа будет записывать результат в файл data.csv, который сама же и создаст

Программа имеет гибкую систему настройки, однако, если пользователь не справляется с ней, то в ней также имеется возможность выбрать настройки по умолчанию.

Если выбраны стандартные настройки, то по умолчанию включены уведомления об ошибках запроса к серверу, которые будут выводиться в консоль. При их отображении не нужно закрывать программу - она продолжает свою работу.

## Известные проблемы

Во время парсинга данных (особенно в регионе - Ростов) существует вероятность, что сервер на время заблокирует запросы программы в следствии чего будут приходить ответы со статусами 403 и 500. Время такой блокировки варьируется от 5 минут до часу времени. Если не происходит парсинг большого количества товаров, то легче всего попробовать перезапустить программу.

Для решения проблемы выше, была добавлена настройка пересоздавать HttpClient в случае получения ответа со статусом 500. Однако проблема осталась, но кажется, что стало немного лучше (время блокировки снизилось). Это опасная настройка т.к. из за нее потенциально могут возникнуть SocketException, при получении которого программа прекратит работу.

По какой-то причине в файле с результатом могут появляться пустые строчки, содержащие только лишь ссылки на страницы продуктов. Вероятная причина в ошибке загрузки страницы, однако почему-то во время загрузки таких страниц исключения не выпадают

